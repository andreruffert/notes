<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <style>
        html,
        body {
            font-family: 'Open Sans', sans-serif;
            height: 100%;
        }
        .editor {
            border: 0;
            font-size: 1em;
            width: 100%;
            height: 100%;
        }
        .editor:focus {
            outline: 0;
        }
    </style>
</head>
<body>
    <textarea class="editor" id="js-editor" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
    <script>
    (function() {

        if (!localStorage.getItem('notes')) {
            localStorage.setItem('notes', JSON.stringify([]));
        }

        var editor = document.getElementById('js-editor');
        var notes = JSON.parse(localStorage.getItem('notes'));

        editor.value = notes.join('\n');

        editor.addEventListener('input', function(e) {
            var lineNumber = this.value.substr(0, this.selectionStart).split('\n').length;
            var lineContent = this.value.split('\n')[lineNumber - 1];

            // push content to array
            notes[lineNumber - 1] = lineContent;

            // update localStorage
            localStorage.setItem('notes', JSON.stringify(notes));
        }, false);

    })();
    </script>
</body>
</html>
